<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>瀑布流</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
		img {
			padding: 10px;
			float: left;
			width: 400px;
		}
	</style>
</head>
<body>
	<img src="./img/1.jpg">
	<img src="./img/2.jpg">
	<img src="./img/3.jpg">
	<img src="./img/4.jpg">
	<img src="./img/5.jpg">
	<img src="./img/6.jpg">
	<img src="./img/7.jpg">
	<img src="./img/8.jpg">
	<img src="./img/9.jpg">
	<img src="./img/10.jpg">
	<img src="./img/11.jpg">
	<img src="./img/12.jpg">
	<img src="./img/13.jpg">
	<img src="./img/14.jpg">
	<img src="./img/15.jpg">
	<img src="./img/16.jpg">
	<img src="./img/17.jpg">
	<img src="./img/18.jpg">
	<img src="./img/19.jpg">
	<img src="./img/20.jpg">
	<img src="./img/21.jpg">
	<img src="./img/23.jpg">
	<img src="./img/24.jpg">
	<img src="./img/25.jpg">
	<img src="./img/27.jpg">
	<img src="./img/28.jpg">
</body>
<script type="text/javascript" src="../common/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
	window.onload = function() {
		waterFall();
	}
	function waterFall() {
		let winWidth = $(window).width();
		let imgWidth = $('img').outerWidth();
		let cols = parseInt(winWidth/imgWidth);
		let imgs = $('img');

		let heightArr = [];
		imgs.each(function(index, item) {
			let itemHeight = $(item).outerHeight();
			let minItemHeight = Math.min(...heightArr);
			let minItemIndex = $.inArray(minItemHeight, heightArr);

			if (index < cols) {
				heightArr.push(itemHeight);
			}else {
				$(item).css({
					position: 'absolute',
					left: minItemIndex*imgWidth + 'px',
					top: minItemHeight + 'px'
				});
				heightArr[minItemIndex] += itemHeight;
			}
		});
	}
</script>
</html>